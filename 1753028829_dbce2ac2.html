```html
<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>科创板IPO：研发与成本核算的核心挑战</title>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts for Noto Serif SC (headings) and Noto Sans SC (body) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.staticfile.org/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        /* Custom CSS Variables for Theming */
        :root {
            /* Dark Mode Colors (Default) */
            --color-bg-primary: hsl(220, 15%, 12%); /* Deep Blue-Gray */
            --color-text-primary: hsl(220, 20%, 90%); /* Off-white */
            --color-text-secondary: hsl(220, 10%, 60%); /* Muted Gray */
            --color-accent: hsl(180, 70%, 50%); /* Vibrant Teal */
            --color-border: hsl(220, 10%, 25%); /* Dark Line */
            --color-card-bg: hsl(220, 15%, 15%); /* Slightly lighter than primary bg */
            --color-card-border: hsl(220, 10%, 20%);
            --color-hero-start: hsl(220, 15%, 10%);
            --color-hero-end: hsl(220, 15%, 18%);
        }

        .light {
            /* Light Mode Colors */
            --color-bg-primary: hsl(0, 0%, 98%); /* Near White */
            --color-text-primary: hsl(220, 15%, 12%); /* Dark Charcoal */
            --color-text-secondary: hsl(220, 10%, 40%); /* Dark Gray */
            --color-accent: hsl(180, 70%, 40%); /* Slightly darker teal for contrast */
            --color-border: hsl(220, 10%, 85%); /* Light Gray */
            --color-card-bg: hsl(0, 0%, 100%);
            --color-card-border: hsl(220, 10%, 90%);
            --color-hero-start: hsl(0, 0%, 95%);
            --color-hero-end: hsl(0, 0%, 100%);
        }

        /* Base Body and Font Styles */
        body {
            font-family: 'Noto Sans SC', Tahoma, Arial, Roboto, "Droid Sans", "Helvetica Neue", "Droid Sans Fallback", "Heiti SC", "Hiragino Sans GB", Simsun, sans-serif;
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Headings Font */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Noto Serif SC', serif;
            color: var(--color-text-primary);
        }

        /* Link Styles */
        a {
            color: var(--color-accent);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        a:hover {
            color: var(--color-accent);
            text-decoration: underline;
        }

        /* Utility classes using CSS variables */
        .bg-primary { background-color: var(--color-bg-primary); }
        .text-primary { color: var(--color-text-primary); }
        .text-secondary { color: var(--color-text-secondary); }
        .text-accent { color: var(--color-accent); }
        .border-line { border-color: var(--color-border); }
        .bg-card { background-color: var(--color-card-bg); }
        .border-card { border-color: var(--color-card-border); }
        .bg-hero-gradient {
            background-image: linear-gradient(to bottom right, var(--color-hero-start), var(--color-hero-end));
        }

        /* Custom styles for tables */
        .article-table th, .article-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--color-border);
            text-align: left;
        }
        .article-table th {
            background-color: var(--color-card-bg);
            font-weight: 600;
        }
        .article-table tr:hover {
            background-color: var(--color-card-border); /* Subtle hover for rows */
        }
        .article-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid var(--color-border);
            border-radius: 0.5rem;
            overflow: hidden; /* Ensures rounded corners on children */
        }

        /* First letter drop cap effect */
        .first-letter-dropcap::first-letter {
            float: left;
            font-size: 3.5em; /* Adjust size as needed */
            line-height: 0.8;
            font-weight: bold;
            margin-right: 0.15em;
            color: var(--color-accent);
            font-family: 'Noto Serif SC', serif;
        }

        /* Mermaid diagram styling */
        .mermaid {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: auto; /* Allow horizontal scroll for large diagrams */
        }

        /* Footer styling */
        footer a {
            color: var(--color-text-secondary);
        }
        footer a:hover {
            color: var(--color-accent);
        }
    </style>
</head>
<body class="bg-primary text-primary transition-colors duration-300">
    <!-- Dark/Light Mode Toggle Button -->
    <div class="fixed top-4 right-4 z-50">
        <button id="theme-toggle" class="p-3 rounded-full bg-card shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-card">
            <i class="fas fa-sun text-yellow-500 dark:hidden text-lg"></i>
            <i class="fas fa-moon text-blue-300 hidden dark:inline-block text-lg"></i>
        </button>
    </div>

    <!-- Hero Section -->
    <header class="relative overflow-hidden py-20 md:py-32 lg:py-48 flex items-center justify-center bg-hero-gradient rounded-b-3xl shadow-xl">
        <!-- Subtle background pattern SVG for texture -->
        <div class="absolute inset-0 z-0 opacity-10" style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23a0aec0\' fill-opacity=\'0.05\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zm0 60v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM0 46v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zm0 60v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM24 46v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM24 60v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM48 46v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM48 60v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4z\' fill=\'%23fff\' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>

        <div class="relative z-10 text-center px-4 max-w-4xl">
            <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-4 text-primary drop-shadow-lg">
                <i class="fas fa-lightbulb text-accent mr-3"></i>科创板IPO：<br class="md:hidden">研发投入与成本核算的核心挑战
            </h1>
            <p class="text-lg md:text-xl text-secondary mb-8 leading-relaxed px-4 md:px-0">
                深度解析生产成本与研发支出的区分、内控鉴证及财务核查要点
            </p>
            <div class="flex justify-center items-center">
                <span class="text-secondary text-sm md:text-base tracking-wider opacity-80">
                    专业视角 · 注册制解读 · 财务合规
                </span>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="container mx-auto px-4 py-12 md:py-16 max-w-6xl">

        <!-- Introduction/Aha Moment -->
        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-accent mb-4 flex items-center">
                <i class="fas fa-comment-dollar mr-3"></i>洞察核心：IPO财务审核的隐藏风险
            </h2>
            <p class="text-lg leading-relaxed text-secondary first-letter-dropcap">
                在科创板IPO的征程中，企业不仅要展现其核心技术实力和成长潜力，更要经受严苛的财务与内控审查。其中，研发投入的核算与生产成本的精确区分，无疑是监管机构最为关注的焦点之一。此文旨在从实践与准则双重维度，为您揭示科创板IPO中研发与成本核算的深层逻辑与避雷指南。
            </p>
        </section>

        <!-- Data Visualization Section -->
        <section class="mb-12 md:mb-16">
            <h2 class="text-3xl font-bold text-primary mb-6 flex items-center">
                <i class="fas fa-project-diagram text-accent mr-3"></i>科创板IPO研发审计关键要素概览
            </h2>
            <p class="text-secondary mb-6 leading-relaxed">
                以下图表可视化展示了科创板IPO审核中，研发投入核算、内控鉴证、财务核查以及常见雷区之间的相互关联和审核流程中的关键环节。
            </p>
            <div class="mermaid" id="mermaid-graph">
                graph TD
                    A[科创板IPO审核] --> B{核心挑战：研发投入核算};
                    B --> C[区分标准];
                    C --> C1[研发支出];
                    C --> C2[生产成本];
                    C1 --> C1a[研究阶段: 费用化];
                    C1 --> C1b[开发阶段: 资本化条件];
                    C2 --> C2a[材料/人工/制造费用];

                    B --> D[内控鉴证重点];
                    D --> D1[制度健全性];
                    D --> D2[执行有效性];
                    D2 --> D2a[研发领料独立审批];
                    D2 --> D2b[工时记录匹配];
                    D2 --> D2c[共用费用合理分摊];

                    B --> E[财务核查核心点];
                    E --> E1[研发支出真实性];
                    E --> E2[费用归集准确性];
                    E --> E3[资本化合规性];

                    B --> F[典型雷区];
                    F --> F1[研发与生产混同];
                    F --> F2[突击增加研发投入];
                    F --> F3[内控缺陷];

                    classDef accent fill:var(--color-accent),stroke:var(--color-accent),stroke-width:2px,color:white; /* White text for accent nodes */
                    classDef primary fill:var(--color-card-bg),stroke:var(--color-border),stroke-width:1px,color:var(--color-text-primary);
                    classDef secondary fill:var(--color-bg-primary),stroke:var(--color-border),stroke-width:1px,color:var(--color-text-secondary);
                    classDef danger fill:hsl(0, 70%, 50%),stroke:hsl(0, 80%, 40%),stroke-width:2px,color:white; /* Red for danger, white text */

                    class A accent;
                    class B primary;
                    class C primary;
                    class D primary;
                    class E primary;
                    class F danger;
                    class C1,C2,D1,D2,E1,E2,E3 primary;
                    class C1a,C1b,C2a,D2a,D2b,D2c,F1,F2,F3 secondary;

                    linkStyle 0 stroke:var(--color-accent),stroke-width:2px;
                    linkStyle 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20 stroke:var(--color-text-secondary),stroke-width:1px;
                </div>
        </section>

        <!-- Content Sections -->
        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-accent mb-6 flex items-center">
                <i class="fas fa-balance-scale mr-3"></i>一、生产成本与研发支出的区分标准
            </h2>
            <div class="mb-8">
                <h3 class="text-2xl font-semibold text-primary mb-4 flex items-center">
                    <i class="fas fa-clipboard-check text-secondary mr-2"></i>1. 核心原则
                </h3>
                <ul class="list-disc list-inside text-lg text-secondary space-y-3">
                    <li>
                        <strong class="text-primary">研发支出：</strong> 直接归属于研发活动的投入，需满足《企业会计准则第6号——无形资产》要求，且需严格区分<strong class="text-primary">研究阶段</strong>（探索性支出，全部费用化）与<strong class="text-primary">开发阶段</strong>（满足资本化条件的支出可资本化）。
                    </li>
                    <li>
                        <strong class="text-primary">生产成本：</strong> 与量产产品直接相关的材料、人工、制造费用，计入存货成本并于销售时结转营业成本。
                    </li>
                </ul>
            </div>
            <div>
                <h3 class="text-2xl font-semibold text-primary mb-4 flex items-center">
                    <i class="fas fa-list-alt text-secondary mr-2"></i>2. 具体区分要点
                </h3>
                <div class="overflow-x-auto rounded-lg shadow-md border border-card">
                    <table class="article-table min-w-full">
                        <thead>
                            <tr>
                                <th class="whitespace-nowrap">项目</th>
                                <th class="whitespace-nowrap">研发支出</th>
                                <th class="whitespace-nowrap">生产成本</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="whitespace-nowrap">材料/人工</td>
                                <td>研发部门独立领料，用于样品试制、技术测试；研发人员薪酬需有工时记录/项目归属证明<sup class="text-accent ml-1">[1][2]</sup></td>
                                <td>生产部门领料，用于量产产品；生产人员薪酬</td>
                            </tr>
                            <tr>
                                <td class="whitespace-nowrap">费用归集</td>
                                <td>按研发项目单独核算，避免与生产共用资源；剩余材料需冲减研发费用或移交生产<sup class="text-accent ml-1">[3]</sup></td>
                                <td>按产品型号/批次归集</td>
                            </tr>
                            <tr>
                                <td class="whitespace-nowrap">资本化条件</td>
                                <td>开发阶段需同时满足：技术可行性、市场意图、资源充足、支出可靠计量、未来经济利益流入<sup class="text-accent ml-1">[4]</sup></td>
                                <td>不适用</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-accent mb-6 flex items-center">
                <i class="fas fa-shield-alt mr-3"></i>二、内控鉴证重点关注事项
            </h2>
            <div class="mb-8">
                <h3 class="text-2xl font-semibold text-primary mb-4 flex items-center">
                    <i class="fas fa-file-invoice text-secondary mr-2"></i>1. 制度健全性
                </h3>
                <p class="text-lg text-secondary leading-relaxed">
                    是否建立《研发项目管理制度》《研发支出核算办法》等，明确研发流程、阶段划分标准及审批权限<sup class="text-accent ml-1">[2][5]</sup>。
                </p>
            </div>
            <div>
                <h3 class="text-2xl font-semibold text-primary mb-4 flex items-center">
                    <i class="fas fa-cogs text-secondary mr-2"></i>2. 执行有效性
                </h3>
                <ul class="list-disc list-inside text-lg text-secondary space-y-3">
                    <li>
                        <strong class="text-primary">研发领料：</strong> 领料单需注明研发项目编号，经技术负责人审批，与生产领料分离<sup class="text-accent ml-1">[2][6]</sup>；
                    </li>
                    <li>
                        <strong class="text-primary">工时记录：</strong> 研发人员工时需通过系统打卡或手工日志记录，按项目分摊人工成本<sup class="text-accent ml-1">[1][10]</sup>；
                    </li>
                    <li>
                        <strong class="text-primary">费用分摊：</strong> 共用设备/场地需制定科学分摊标准（如机时记录），避免研发费用虚增<sup class="text-accent ml-1">[3][8]</sup>。
                    </li>
                </ul>
            </div>
        </section>

        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-accent mb-6 flex items-center">
                <i class="fas fa-search-dollar mr-3"></i>三、财务核查核心关注点
            </h2>
            <ul class="list-disc list-inside text-lg text-secondary space-y-4">
                <li>
                    <strong class="text-primary">研发支出真实性：</strong> 核查研发项目立项报告、阶段性验收文件，确认研发活动与业务相关性<sup class="text-accent ml-1">[1][6]</sup>；抽检研发领料单与BOM清单对比，验证材料用量合理性（如小批量试制 vs 大规模生产）<sup class="text-accent ml-1">[3][8]</sup>。
                </li>
                <li>
                    <strong class="text-primary">费用归集准确性：</strong> 检查研发人员花名册、劳动合同、薪酬明细，确认非生产/管理人员混入研发费用<sup class="text-accent ml-1">[1][10]</sup>；追踪研发形成样品的会计处理（销售/报废时是否冲减研发费用）<sup class="text-accent ml-1">[3][6]</sup>。
                </li>
                <li>
                    <strong class="text-primary">资本化合规性：</strong> 资本化时点是否取得第三方鉴定、专利证书等外部证据<sup class="text-accent ml-1">[4][11]</sup>；开发支出摊销政策是否合理，减值测试是否充分<sup class="text-accent ml-1">[1][4]</sup>。
                </li>
            </ul>
        </section>

        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-accent mb-6 flex items-center">
                <i class="fas fa-exclamation-triangle mr-3"></i>四、审核中的典型雷区
            </h2>
            <ul class="list-disc list-inside text-lg text-secondary space-y-4">
                <li>
                    <strong class="text-primary">研发与生产混同：</strong> 生产人员参与研发未进行成本分摊，或量产产品改良费用计入研发<sup class="text-accent ml-1">[3][8]</sup>。
                </li>
                <li>
                    <strong class="text-primary">突击增加研发投入：</strong> IPO申报前三年研发费用率异常高于同行，缺乏合理依据<sup class="text-accent ml-1">[6][13]</sup>。
                </li>
                <li>
                    <strong class="text-primary">内控缺陷：</strong> 无独立研发领料流程、工时记录缺失、费用分摊标准模糊<sup class="text-accent ml-1">[2][5][7]</sup>。
                </li>
            </ul>
        </section>

        <!-- Further Reading Section (Bonus) -->
        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-primary mb-6 flex items-center">
                <i class="fas fa-book-reader text-accent mr-3"></i>进一步阅读：精选推荐
            </h2>
            <p class="text-secondary mb-6 leading-relaxed">
                为深入理解科创板IPO财务合规与研发投入核算，我们为您精选以下权威书籍与专业指南。
            </p>
            <ul class="list-disc list-inside text-lg text-secondary space-y-4">
                <li>
                    <strong class="text-primary">《企业会计准则——无形资产》及相关解释：</strong> 深入理解研发支出资本化与费用化的官方规定。
                    <a href="http://www.mof.gov.cn/zhengwuxinxi/zhengwuxinxi/kj/kjzhidao/qiyezhunze/qiyezhunzeshiyongzhinan/200611/t20061101_135063.htm" target="_blank" class="ml-2 text-accent text-sm"><i class="fas fa-external-link-alt mr-1"></i>查看</a>
                </li>
                <li>
                    <strong class="text-primary">《中国证券市场IPO制度改革研究》：</strong> 了解中国IPO制度演变及注册制改革的深层逻辑。
                    <span class="ml-2 text-secondary text-sm opacity-70">(暂无公开链接)</span>
                </li>
                <li>
                    <strong class="text-primary">《上市公司内部控制指引》及应用指南：</strong> 掌握企业内控体系建设与鉴证的核心要义。
                    <a href="http://www.csrc.gov.cn/csrc/c101888/c102005/11996593/art/2018/art_20180424_2723.html" target="_blank" class="ml-2 text-accent text-sm"><i class="fas fa-external-link-alt mr-1"></i>查看</a>
                </li>
                <li>
                    <strong class="text-primary">《科创板审核问答与案例精选》：</strong> 从实际问询案例中学习审核关注点与应对策略。
                    <span class="ml-2 text-secondary text-sm opacity-70">(暂无公开链接)</span>
                </li>
                <li>
                    <strong class="text-primary">《研发费用会计核算与税务处理实务》：</strong> 针对研发费用的具体核算和税务处理提供实践指导。
                    <span class="ml-2 text-secondary text-sm opacity-70">(暂无公开链接)</span>
                </li>
            </ul>
        </section>

        <!-- References / Footnotes -->
        <section class="mb-12 md:mb-16 bg-card p-6 md:p-8 rounded-xl shadow-lg border border-card transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1">
            <h2 class="text-3xl font-bold text-primary mb-6 flex items-center">
                <i class="fas fa-link text-accent mr-3"></i>依据来源
            </h2>
            <ol class="list-decimal list-inside text-secondary text-sm md:text-base space-y-3">
                <li>
                    <span class="font-medium text-primary">证监会《监管规则适用指引——发行类第5号》：</span>"研发支出需真实、准确，与研发活动直接相关"，明确费用归集及阶段划分要求。
                    <a href="http://www.360doc.com/content/23/0218/12/37320071_1068300303.shtml" target="_blank" class="text-accent ml-2">链接</a>
                </li>
                <li>
                    <span class="font-medium text-primary">某创业板IPO问询函回复：</span>"研发领料独立审批流程"，强调内控制度执行证据。
                    <a href="http://qxb-pdf-osscache.qixin.com/AnBaseinfo/58260a89a39d446f022d47a8dcee34de.pdf" target="_blank" class="text-accent ml-2">链接</a>
                </li>
                <li>
                    <span class="font-medium text-primary">IPO现场检查案例：</span>"研发材料与生产混用"被列为内控缺陷。
                    <a href="https://www.reanda.com/newsContent.php?id=13169" target="_blank" class="text-accent ml-2">链接</a>
                </li>
                <li>
                    <span class="font-medium text-primary">《企业会计准则第6号——无形资产》：</span>开发阶段资本化的五项条件。
                    <span class="text-secondary ml-2">(标准名称，详情请查阅官方准则)</span>
                </li>
                <li>
                    <span class="font-medium text-primary">科创板问询案例：</span>"研发人员薪酬归集需匹配项目工时记录"。
                    <a href="https://www.kwm.com/content/dam/kwm/insights/download-publication/china/2022/%E7%A7%91%E5%88%9B%E6%9D%BF%E4%B8%93%E9%A2%98%E8%A7%A3%E8%AF%BB%E5%8F%8A%E5%88%9B%E6%96%B0%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%902022-%E4%B8%8A.pdf" target="_blank" class="text-accent ml-2">链接</a>
                </li>
                <li>
                    <span class="font-medium text-primary">科创板属性标准：</span>"近三年研发投入占比≥5%或累计≥6000万元"。
                    <a href="https://www.pwccn.com/zh/research-and-insights/china-capital-new-time-jan2023.pdf" target="_blank" class="text-accent ml-2">链接</a>
                </li>
            </ol>
            <p class="text-secondary text-sm mt-8 leading-relaxed">
                <strong class="text-primary">注：</strong> 实务中需确保研发全流程留痕（立项-领料-工时-产出），审核中会穿透核查原始凭证与业务实质的匹配性。
            </p>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-card py-8 text-secondary text-center text-sm border-t border-card">
        <div class="container mx-auto px-4">
            <p>&copy; 2023 科创板IPO研究. All rights reserved.</p>
            <p class="mt-2">Designed with <i class="fas fa-heart text-red-500 mx-1"></i> by AI Web Designer</p>
            <div class="mt-4 flex justify-center space-x-4">
                <a href="#" class="hover:text-accent"><i class="fab fa-twitter"></i> Twitter</a>
                <a href="#" class="hover:text-accent"><i class="fab fa-linkedin"></i> LinkedIn</a>
                <a href="#" class="hover:text-accent"><i class="fas fa-envelope"></i> Contact</a>
            </div>
        </div>
    </footer>

    <!-- Mermaid.js for Diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js"></script>
    <script>
        // Mermaid Initialization with dynamic theme based on body class
        function initializeMermaid(theme) {
            mermaid.initialize({
                startOnLoad: true,
                theme: theme === 'dark' ? 'dark' : 'default', // 'default' is Mermaid's light theme
                securityLevel: 'loose', // Allows external links in diagrams
                flowchart: {
                    curve: 'basis', // Smooth lines
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10
                },
                themeVariables: {
                    // Custom theme variables to match Tailwind CSS variables
                    primaryColor: getComputedStyle(document.documentElement).getPropertyValue('--color-card-bg').trim(),
                    primaryTextColor: getComputedStyle(document.documentElement).getPropertyValue('--color-text-primary').trim(),
                    lineColor: getComputedStyle(document.documentElement).getPropertyValue('--color-border').trim(),
                    secondaryColor: getComputedStyle(document.documentElement).getPropertyValue('--color-bg-primary').trim(),
                    tertiaryColor: getComputedStyle(document.documentElement).getPropertyValue('--color-card-border').trim(),
                    accentColor: getComputedStyle(document.documentElement).getPropertyValue('--color-accent').trim(),
                    // Specific overrides for node colors if needed
                    nodeBorder: getComputedStyle(document.documentElement).getPropertyValue('--color-border').trim(),
                    mainBkg: getComputedStyle(document.documentElement).getPropertyValue('--color-card-bg').trim(),
                    nodeTextColor: getComputedStyle(document.documentElement).getPropertyValue('--color-text-primary').trim(),
                }
            });
            // Force re-render of existing mermaid diagrams
            const mermaidGraph = document.getElementById('mermaid-graph');
            if (mermaidGraph) {
                // Get the original graph definition
                const graphDefinition = mermaidGraph.textContent.trim();
                // Clear and re-insert the definition to force re-processing
                mermaidGraph.removeAttribute('data-processed');
                mermaidGraph.innerHTML = graphDefinition;
                // Run mermaid on the specific element
                mermaid.run({ nodes: [mermaidGraph] });
            }
        }

        // Dark/Light Mode Toggle Logic
        const themeToggleBtn = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;

        // Function to set the theme
        function setTheme(theme) {
            if (theme === 'dark') {
                htmlElement.classList.add('dark');
                htmlElement.classList.remove('light');
            } else {
                htmlElement.classList.remove('dark');
                htmlElement.classList.add('light');
            }
            localStorage.setItem('theme', theme);
            // Re-initialize Mermaid to apply new theme variables
            initializeMermaid(theme);
        }

        // Check for saved theme preference or system preference on load
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (savedTheme) {
            setTheme(savedTheme);
        } else if (prefersDark) {
            setTheme('dark');
        } else {
            setTheme('light');
        }

        // Event listener for theme toggle button
        themeToggleBtn.addEventListener('click', () => {
            const currentTheme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
            setTheme(currentTheme === 'dark' ? 'light' : 'dark');
        });

        // Initialize Mermaid on page load based on current theme
        document.addEventListener('DOMContentLoaded', () => {
            const currentTheme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
            initializeMermaid(currentTheme);
        });
    </script>
</body>
</html>
```